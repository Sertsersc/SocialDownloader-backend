# Node tabanlı bir imajtan başla
FROM node:18-bullseye

# Python ve FFmpeg yükle (yt-dlp için şart)
RUN apt-get update && apt-get install -y python3 python3-pip ffmpeg

# yt-dlp yükle
RUN pip install yt-dlp

# Çalışma dizinini ayarla
WORKDIR /app

# Paketleri kopyala ve yükle
COPY package*.json ./
RUN npm install

# Projeyi kopyala
COPY . .

# Port değişkeni Railway tarafından atanır
ENV PORT=3000

# Sunucuyu başlat
CMD ["node", "server.js"]
